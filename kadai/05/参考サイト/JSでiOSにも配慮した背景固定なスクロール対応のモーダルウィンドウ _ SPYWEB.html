<!DOCTYPE html>
<!-- saved from url=(0079)https://spyweb.media/2017/09/21/modal-window-fixed-background-also-support-ios/ -->
<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="https://spyweb.media/wp-content/themes/flair/favicon/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="https://spyweb.media/wp-content/themes/flair/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://spyweb.media/wp-content/themes/flair/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://spyweb.media/wp-content/themes/flair/favicon/favicon-16x16.png">
  <link rel="manifest" href="https://spyweb.media/wp-content/themes/flair/favicon/manifest.json">
  <link rel="mask-icon" href="https://spyweb.media/wp-content/themes/flair/favicon/safari-pinned-tab.svg" color="#0a8cbe">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="https://spyweb.media/wp-content/themes/flair/favicon/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <title>JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ | SPYWEB</title>

<!-- All in One SEO Pack 2.4.4.1 by Michael Torbert of Semper Fi Web Design[-1,-1] -->
<link rel="canonical" href="https://spyweb.media/2017/09/21/modal-window-fixed-background-also-support-ios/">
<!-- /all in one seo pack -->
<link rel="alternate" type="application/rss+xml" title="SPYWEB » JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ のコメントのフィード" href="https://spyweb.media/2017/09/21/modal-window-fixed-background-also-support-ios/feed/">
<link rel="stylesheet" id="style-css" href="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="font-css" href="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/css(1)" type="text/css" media="all">
<script src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/osd.js"></script><script type="text/javascript" async="" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/analytics.js"></script><script src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/ca-pub-9575888437670647.js"></script><script type="text/javascript">
/* <![CDATA[ */
var wpp_params = {"sampling_active":"","sampling_rate":"100","ajax_url":"https:\/\/spyweb.media\/wp-admin\/admin-ajax.php","action":"update_views_ajax","ID":"133","token":"b6c87da852"};
/* ]]> */
</script>
<script src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/wpp.js"></script>
    <script src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/js" async=""></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-106387971-1');
  </script>
  <link rel="preload" href="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/f(4).txt" as="script"><script type="text/javascript" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/f(4).txt"></script><link rel="preload" href="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/f(5).txt" as="script"><script type="text/javascript" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/f(5).txt"></script><link rel="preload" href="https://pagead2.googlesyndication.com/pagead/js/r20190603/r20190131/show_ads_impl.js" as="script"><script charset="utf-8" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/moment_timeline_tweet.a20574004ea824b1c047f200045ffa1e.js"></script><script charset="utf-8" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/tweet.73b7ab8a56ad3263cad8d36ba66467fc.js"></script></head>
<body>

<div class="l-container">

<header class="l-header">
  <div class="l-header__nav">
    <h1 class="p-header__logo">
      <a class="p-header__link" href="https://spyweb.media/">
        <img class="p-header__image" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/spyweb.svg">
      </a>
    </h1>
    <nav class="p-category-nav">
  <ul class="p-category-nav__inner">
    <li class="p-category-nav__item"><a class="p-category-nav__link" href="https://spyweb.media/category/ui-snippet/" data-slug="ui-snippet" data-count="2"><span>UIスニペット</span></a></li>
<li class="p-category-nav__item"><a class="p-category-nav__link" href="https://spyweb.media/category/front-end/" data-slug="front-end" data-count="55"><span>フロントエンド</span></a></li>
<li class="p-category-nav__item"><a class="p-category-nav__link" href="https://spyweb.media/category/js-plugin/" data-slug="js-plugin" data-count="2"><span>JSプラグイン</span></a></li>
<li class="p-category-nav__item"><a class="p-category-nav__link" href="https://spyweb.media/category/wordpress/" data-slug="wordpress" data-count="6"><span>WordPress</span></a></li>
<li class="p-category-nav__item"><a class="p-category-nav__link" href="https://spyweb.media/category/scss-course/" data-slug="scss-course" data-count="5"><span>Scss(Sass)入門講座</span></a></li>
<li class="p-category-nav__item"><a class="p-category-nav__link" href="https://spyweb.media/category/back-end/" data-slug="back-end" data-count="1"><span>バックエンド</span></a></li>
  </ul>
</nav>



  </div>
  <div class="l-header__sidebar c-hide-scrollbar">
    <div class="c-hide-scrollbar__area">
      <div class="l-header__sidebar__inner">
        <h4 class="p-sidebar__title">人気記事</h4>


<!-- WordPress Popular Posts Plugin v4.0.13 [PHP] [all] [views] [custom] -->
<ol class="p-sidebar-popular-posts"><li class="p-sidebar-popular-posts__item"><a class="p-sidebar-popular-posts__link" href="https://spyweb.media/2017/09/21/modal-window-fixed-background-also-support-ios/" title="JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ"><p>JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ</p></a></li><li class="p-sidebar-popular-posts__item"><a class="p-sidebar-popular-posts__link" href="https://spyweb.media/2017/11/27/css-font-family-best-practice-yu-gothic-meiryo-etc/" title="CSSで游ゴシックやメイリオなどのfont-familyを指定するときのベストプラクティス"><p>CSSで游ゴシックやメイリオなどのfont-familyを指定するときのベストプラクティス</p></a></li><li class="p-sidebar-popular-posts__item"><a class="p-sidebar-popular-posts__link" href="https://spyweb.media/2017/12/04/ie-edge-css-hacks/" title="IE8〜11/Edge12〜の各バージョンに対応したCSSハックまとめ"><p>IE8〜11/Edge12〜の各バージョンに対応したCSSハックまとめ</p></a></li><li class="p-sidebar-popular-posts__item"><a class="p-sidebar-popular-posts__link" href="https://spyweb.media/2017/09/15/hide-and-custom-scrollbar-design/" title="CSSでスクロールバー非表示とJSでスクロールバーのデザインをカスタマイズする"><p>CSSでスクロールバー非表示とJSでスクロールバーのデザインをカスタマイズする</p></a></li><li class="p-sidebar-popular-posts__item"><a class="p-sidebar-popular-posts__link" href="https://spyweb.media/2018/01/13/css-border-text/" title="CSSで簡単に縁取りされたアウトライン文字を作る"><p>CSSで簡単に縁取りされたアウトライン文字を作る</p></a></li><li class="p-sidebar-popular-posts__item"><a class="p-sidebar-popular-posts__link" href="https://spyweb.media/2017/12/25/js-touch-click-event-twice-at-the-same-time/" title="JSでtouchstartとclickイベントを2回発生させないようにしつつ同時に指定する"><p>JSでtouchstartとclickイベントを2回発生させないようにしつつ同時に指定する</p></a></li><li class="p-sidebar-popular-posts__item"><a class="p-sidebar-popular-posts__link" href="https://spyweb.media/2017/11/02/js-drag-and-drop-sortable-plugin/" title="ドラッグ＆ドロップで要素を並び替えることができるSortable.js"><p>ドラッグ＆ドロップで要素を並び替えることができるSortable.js</p></a></li><li class="p-sidebar-popular-posts__item"><a class="p-sidebar-popular-posts__link" href="https://spyweb.media/2018/01/16/js-detect-browser-reload/" title="JSでブラウザがリロードされたかどうかを判定する"><p>JSでブラウザがリロードされたかどうかを判定する</p></a></li><li class="p-sidebar-popular-posts__item"><a class="p-sidebar-popular-posts__link" href="https://spyweb.media/2017/12/29/jquery-scrolltop-html-or-body/" title="jQueryのscrollTop()にhtmlかbodyどちらを指定すればよいのか？"><p>jQueryのscrollTop()にhtmlかbodyどちらを指定すればよいのか？</p></a></li><li class="p-sidebar-popular-posts__item"><a class="p-sidebar-popular-posts__link" href="https://spyweb.media/2018/01/09/svg-horizontal-vertical-centering/" title="SVGでtext要素を上下左右中央寄せする"><p>SVGでtext要素を上下左右中央寄せする</p></a></li></ol>
<!-- End WordPress Popular Posts Plugin v4.0.13 -->
      </div>
    </div>
  </div>
</header>

<header class="p-header--fixed">
  <h1>
    <a class="p-header--fixed__link" href="https://spyweb.media/">
      <img class="p-header--fixed__image" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/spyweb-sp.svg">
    </a>
  </h1>
</header>


<main class="l-main">
  <div class="l-content">
    <div class="l-content__outer">
      <div id="barba-wrapper" aria-live="polite">
        <div class="l-content__inner barba-container">
          <section class="l-post" data-id="133">
            <time class="p-post__date" datetime="2017-09-21">2017.09.21</time>
            <h1 class="p-post__title">JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ</h1>
            
<aside class="c-share">
  <div class="c-share__inner">
    <div class="c-share__item">
      <a class="c-share__link c-share--twitter" href="https://twitter.com/share?text=JS%E3%81%A7iOS%E3%81%AB%E3%82%82%E9%85%8D%E6%85%AE%E3%81%97%E3%81%9F%E8%83%8C%E6%99%AF%E5%9B%BA%E5%AE%9A%E3%81%AA%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E5%AF%BE%E5%BF%9C%E3%81%AE%E3%83%A2%E3%83%BC%E3%83%80%E3%83%AB%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%20%7C%20SPYWEB&amp;url=https%3A%2F%2Fspyweb.media%2F2017%2F09%2F21%2Fmodal-window-fixed-background-also-support-ios%2F" target="_blank"></a>
    </div>
    <div class="c-share__item">
      <a class="c-share__link c-share--facebook" href="https://www.facebook.com/sharer.php?src=bm&amp;u=https%3A%2F%2Fspyweb.media%2F2017%2F09%2F21%2Fmodal-window-fixed-background-also-support-ios%2F&amp;t=JS%E3%81%A7iOS%E3%81%AB%E3%82%82%E9%85%8D%E6%85%AE%E3%81%97%E3%81%9F%E8%83%8C%E6%99%AF%E5%9B%BA%E5%AE%9A%E3%81%AA%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E5%AF%BE%E5%BF%9C%E3%81%AE%E3%83%A2%E3%83%BC%E3%83%80%E3%83%AB%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%20%7C%20SPYWEB" target="_blank"></a>
    </div>
    <div class="c-share__item">
      <a class="c-share__link c-share--hatebu" href="https://b.hatena.ne.jp/entry/https%3A%2F%2Fspyweb.media%2F2017%2F09%2F21%2Fmodal-window-fixed-background-also-support-ios%2F" target="_blank"></a>
    </div>
    <div class="c-share__item">
      <a class="c-share__link c-share--pocket" href="https://getpocket.com/edit?url=https%3A%2F%2Fspyweb.media%2F2017%2F09%2F21%2Fmodal-window-fixed-background-also-support-ios%2F" target="_blank"></a>
    </div>
    <div class="c-share__item">
      <a class="c-share__link c-share--feedly" href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Fspyweb.media%2Ffeed%2F" target="_blank"></a>
    </div>
  </div>
</aside>            <section class="p-post__content">
              <p><b>スクロール対応のモーダルウィンドウ</b>を作ろうと思って何か良いライブラリやプラグインがあれば利用しようと思っていたのですが、いいなと思うものが無かったので自作することにしました。</p>
<div class="p-post__adsense"><script async="" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/f(6).txt"></script><ins class="adsbygoogle" style="display: block; text-align: center; height: 155px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9575888437670647" data-ad-slot="3883015017" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:155px;margin:0;padding:0;position:relative;visibility:visible;width:618px;background-color:transparent;"><ins id="aswift_0_anchor" style="display:block;border:none;height:155px;margin:0;padding:0;position:relative;visibility:visible;width:618px;background-color:transparent;"><iframe width="618" height="155" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;border:0px;width:618px;height:155px;" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/saved_resource(1).html"></iframe></ins></ins></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script></div><h2>デモ</h2>
<ul><li><a href="https://spyweb.media/wp-content/uploads/2017/09/modal-fixed-background.html" target="_blank">デモ | JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ</a>
</li></ul><h2>基本構造</h2>
<h3>HTML</h3>
<div class="p-post__code" data-language="markup"><pre class=" language-markup"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>timeline<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>overlay<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>inner<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>modal<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        ...
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>閉じる<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>例として、Twitterのようにつぶやきをクリックするとモーダルウィンドウが表示されるようにします。<code>.overlay</code> 要素は<b>必ず</b> <code>&lt;body&gt;</code> 直下に配置します。</p>
<h3>CSS</h3>
<div class="p-post__code" data-language="css"><pre class=" language-css"><code class=" language-css"><span class="token selector">* </span><span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.overlay</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">.45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* scrollにはしないことでスクロールの必要がないときはスクロールバーを表示させない */</span>
  <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.container</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.inner</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">2.7</span>em <span class="token number">2</span>em<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* モーダル外側の余白 */</span>
  <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.modal</span> </span><span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">1.9</span>em <span class="token number">2</span>em<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* モーダル内側の余白 */</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> <span class="token number">550</span>px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#fff</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>最低限必要なCSSのみ抜き出しています。<b>上下中央</b>は以下の記事に詳しく説明がありますが、<code>table</code> を使うことで高さが自由に伸縮するようにしています。</p>
<ul><li><a href="https://spyweb.media/2017/09/19/auto-adjustment-horizontal-vertical-centering/">CSSで余白は自動調整される上下左右中央揃えの方法4つとその違い | SPYWEB</a>
</li></ul><h2>モーダルウィンドウの表示</h2>
<div class="p-post__code" data-language="javascript"><pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// つぶやきをクリック</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.timeline &gt; li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// モーダルをフェードイン</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>表示処理はとても簡単です。つぶやきをクリックしたら表示するようにします。</p>
<h2>モーダルウィンドウの非表示</h2>
<div class="p-post__code" data-language="javascript"><pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// モーダルを閉じる処理</span>
<span class="token keyword">var</span> <span class="token function-variable function">closeModal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// モーダルをフェードアウト</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    opacity<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// モーダルを一番上にスクロールしておく</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p>閉じる処理は使い回すことが多いので<b>関数</b>にします。閉じる際にモーダルウィンドウを一番上へスクロールしておきます。</p>
<div class="p-post__code" data-language="javascript"><pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// オーバーレイをクリック</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// モーダルの領域外をクリックで閉じる</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">$</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.modal'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">closeModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 閉じるボタンクリックでモーダルを閉じる</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">closeModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p><b>モーダルウィンドウの領域外</b>（黒い半透明の部分）と<b>モーダルウィンドウ内のボタン</b>の両方で閉じることができるようにします。</p>
<h2>モーダル表示中は背景を固定</h2>
<p>モーダルウィンドウ自体がスクロール可能だとスクロール位置が上端または下端に達したときに<b>ページ全体</b>がスクロールできてしまい、非常に使いづらくなってしまいます。</p>
<div class="p-post__code" data-language="css"><pre class=" language-css"><code class=" language-css"><span class="token selector">html, body </span><span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>ほとんどのブラウザでページ全体のスクロールを止めるためにはたったこれだけのCSSを記述すればよいだけです。</p>
<div class="p-post__code" data-language="javascript"><pre class=" language-javascript" data-addition="3-4,12-13,21-22" data-line="3-4,12-13,21-22"><code class=" language-javascript"><span class="token comment" spellcheck="true">// つぶやきをクリック</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.timeline &gt; li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// スクロール禁止</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'overflow'</span><span class="token punctuation">,</span> <span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment" spellcheck="true">// モーダルをフェードイン</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// モーダルを閉じる処理</span>
<span class="token keyword">var</span> <span class="token function-variable function">closeModal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// overflow: hidden; を消す</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment" spellcheck="true">// モーダルをフェードアウト</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    opacity<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// モーダルを一番上にスクロールしておく</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// overflow: hidden を消す</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html).removeAttr('</span>style'<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<div aria-hidden="true" class=" line-highlight" data-start="3" data-end="4" style="top: 44px;"> 
 
</div><div aria-hidden="true" class=" line-highlight" data-start="12" data-end="13" style="top: 242px;"> 
 
</div><div aria-hidden="true" class=" line-highlight" data-start="21" data-end="22" style="top: 440px;"> 
 
</div></code></pre></div>
<p>しかし、この方法では<b>iOS</b>でスクロールを無効にすることはできません。そこで、<code>touchEvent</code> を使って対応します。</p>
<h2>iOSでもスクロールを止めたい</h2>
<div class="p-post__code" data-language="javascript"><pre class=" language-javascript"><code class=" language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>iOSでスクロールを止める方法も実は簡単で、<code>touchmove</code> で <code>event.preventDefault();</code> してやるだけです。しかし、これだけ記述してしまうと問題が発生します。何が問題かというと、<b>モーダルウィンドウ内のスクロール</b>まで禁止されてしまうのです。それを避ける方法が下記になります。</p>
<div class="p-post__code" data-language="javascript"><pre class=" language-javascript" data-addition="1,3-6,10-22,35-36" data-line="1,3-6,10-22,35-36"><code class=" language-javascript"><span class="token keyword">var</span> touch_start_y<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// タッチしたとき開始位置を保存しておく</span>
<span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  touch_start_y <span class="token operator">=</span> event<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>screenY<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// つぶやきをクリック</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.timeline &gt; li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// スワイプしているとき</span>
  <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'touchmove.noscroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> current_y <span class="token operator">=</span> event<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>screenY<span class="token punctuation">,</span>
        height <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        is_top <span class="token operator">=</span> touch_start_y <span class="token operator">&lt;=</span> current_y <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">,</span>
        is_bottom <span class="token operator">=</span> touch_start_y <span class="token operator">&gt;=</span> current_y <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop <span class="token operator">===</span> height<span class="token punctuation">;</span>
    
    <span class="token comment" spellcheck="true">// スクロール対応モーダルの上端または下端のとき</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>is_top <span class="token operator">||</span> is_bottom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// スクロール禁止</span>
      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment" spellcheck="true">// スクロール禁止</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'overflow'</span><span class="token punctuation">,</span> <span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment" spellcheck="true">// モーダルをフェードイン</span>
  $overlay<span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// モーダルを閉じる処理</span>
<span class="token keyword">var</span> <span class="token function-variable function">closeModal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// overflow: hidden; と padding-right を消す</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// イベントを削除</span>
  <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'touchmove.noscroll'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment" spellcheck="true">// モーダルをフェードアウト</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    opacity<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// モーダルを一番上にスクロールしておく</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// overflow: hidden を消す</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<div aria-hidden="true" class=" line-highlight" data-start="1" style="top: 0px;"> 
</div><div aria-hidden="true" class=" line-highlight" data-start="3" data-end="6" style="top: 44px;"> 
 
 
 
</div><div aria-hidden="true" class=" line-highlight" data-start="10" data-end="22" style="top: 198px;"> 
 
 
 
 
 
 
 
 
 
 
 
 
</div><div aria-hidden="true" class=" line-highlight" data-start="35" data-end="36" style="top: 748px;"> 
 
</div></code></pre></div>
<p>モーダルウィンドウをスクロールしていて、スクロール位置が上端または下端に達したら <code>preventDefault()</code> してスクロールを止めます。また、つぶやきをクリックする度にイベントが登録されてしまうので <code>off()</code> でイベントを削除します。詳しくは以下の記事に分かりやすい説明があります。</p>
<ul><li><a href="https://qiita.com/nekoneko-wanwan/items/3d3da95f1127f743397d" target="_blank">jQuery.on()は追加式なのでイベントの重複登録に注意しよう | Qiita</a></li>
</ul><h2>スクロールバーの対応</h2>
<div class="p-post__code" data-language="javascript"><pre class=" language-javascript" data-addition="1,22-26" data-line="1,22-26"><code class=" language-javascript"><span class="token keyword">var</span> scrollbar_width <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">-</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollWidth<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// つぶやきをクリック</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.timeline &gt; li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// スワイプしているとき</span>
  <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'touchmove.noscroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> current_y <span class="token operator">=</span> event<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>screenY<span class="token punctuation">,</span>
        height <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        is_top <span class="token operator">=</span> touch_start_y <span class="token operator">&lt;=</span> current_y <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">,</span>
        is_bottom <span class="token operator">=</span> touch_start_y <span class="token operator">&gt;=</span> current_y <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop <span class="token operator">===</span> height<span class="token punctuation">;</span>
    
    <span class="token comment" spellcheck="true">// スクロール対応モーダルの上端または下端のとき</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>is_top <span class="token operator">||</span> is_bottom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// スクロール禁止</span>
      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment" spellcheck="true">// スクロール禁止</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'overflow'</span><span class="token punctuation">,</span> <span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">// スクロールバーがあるとき</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollbar_width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// その分padding-rightを追加</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'padding-right'</span><span class="token punctuation">,</span> scrollbar_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment" spellcheck="true">// モーダルをフェードイン</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div aria-hidden="true" class=" line-highlight" data-start="1" style="top: 0px;"> 
</div><div aria-hidden="true" class=" line-highlight" data-start="22" data-end="26" style="top: 462px;"> 
 
 
 
 
</div></code></pre></div>
<p>スクロールバーがある場合はその分 <code>padding-right</code> で余白を作らないとモーダルウィンドウ表示時に<b>左</b>にずれます。</p>
<h2>IEのバグ</h2>
<p>IEで表示を確認してみると、スクロールの際にオーバーレイ（黒い半透明の部分）の上端下端がとぎれて、オーバーレイの下のコンテンツが見切れるという現象が起きます。</p>
<div class="p-post__code" data-language="css"><pre class=" language-css" data-addition="5,9,17" data-deletion="4,8" data-line="5,9,17,4,8"><code class=" language-css"><span class="token selector"><span class="token class">.overlay</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> -<span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> -<span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">.45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.container</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">10</span>px <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<div aria-hidden="true" class=" line-highlight" data-start="5" style="top: 88px;"> 
</div><div aria-hidden="true" class=" line-highlight" data-start="9" style="top: 176px;"> 
</div><div aria-hidden="true" class=" line-highlight" data-start="17" style="top: 352px;"> 
</div><div aria-hidden="true" class=" line-highlight" data-start="4" style="top: 66px;"> 
</div><div aria-hidden="true" class=" line-highlight" data-start="8" style="top: 154px;"> 
</div></code></pre></div>
<p>そこで、オーバーレイを上下 <code>-10px</code> にして、その子要素である <code>.container</code> の <code>padding</code> で元に戻しています。これで見切れる現象は解決できます。</p>
<h2>iOSにおける <code>fixed</code> の不安定な挙動</h2>
<p>iOSで <code>position: fixed;</code> の要素に <code>background-color</code> が指定されているときにスクロールすると上端下端が<b>チラついて</b>しまう現象が起きます。</p>
<div class="p-post__code" data-language="css"><pre class=" language-css" data-addition="12-13" data-line="12-13"><code class=" language-css"><span class="token selector"><span class="token class">.overlay</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> -<span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> -<span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">.45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>
  <span class="token property">-webkit-backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<div aria-hidden="true" class=" line-highlight" data-start="12" data-end="13" style="top: 242px;"> 
 
</div></code></pre></div>
<p><code>backface-visibility</code> を指定すると<b>CPU</b>から<b>GPU</b>処理になり、指定する前よりはチラつきを抑えることができます。</p>
<h2>ソースコード</h2>
<h3>HTML</h3>
<div class="p-post__code" data-language="markup"><pre class=" language-markup"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>timeline<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>江戸川乱歩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>推理の興味を充分満足させながら、リアルな小説を書くということです。それが理想です。長編の『点と線』などは、その理想に近づいている。ぼくがあなた（松本清張）の出現を画期的といったのはその意味ですよ。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>江戸川乱歩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>孤独に徹する勇気もなく、犯罪者にもなれず、自殺するほどの強い情熱もなく、結局偽善的に世間と交わって行くほかはなかった。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>江戸川乱歩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>男というものは、少々陰険に見えても、根性はあくまでもお人よしにできているものだ。そして、女というものは、表面何も知らないねんねえのようであっても、心の底には生まれつきの陰険が巣くっているものだ。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>江戸川乱歩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>結局、妥協したのである。もともと生きるとは妥協することである。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>江戸川乱歩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>たとえ、どんなすばらしいものにでも二度とこの世に生れ替って来るのはごめんです。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>江戸川乱歩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>「なぜ神は人間を作ったか」というレジスタンスの方が、戦争や平和や左翼よりも百倍も根本的で、百倍も強烈だ。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>江戸川乱歩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>恋愛ばかりでなく、すべての物の考え方が誰とも一致しなかった。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>江戸川乱歩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>中学一年生のころだったと思う。憂鬱症みたいな病気に罹って、二階の一間にとじこもっていた。暗い中で天体のことなどを考えていた。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>江戸川乱歩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>会話を好まず、独りで物を考える、よくいえば思索癖、悪くいえば妄想癖が、幼年時代からあり、大人になっても、それがなおらなかった。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>江戸川乱歩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>小説というものが、政治論文のように積極的に人生をよくするためにのみ書かれなければならないとしたら、彼は多分「現実」とともに「小説」をも厭わしいものに思ったに違いない。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>overlay<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>inner<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>modal<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>さて、何から書き初めたらいいのか、余りに人間離れのした、奇怪千万な事実なので、こうした、人間世界で使われる、手紙という様な方法では、妙に面おもはゆくて、筆の鈍るのを覚えます。でも、迷っていても仕方がございません。兎も角も、事の起りから、順を追って、書いて行くことに致しましょう。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>私は生れつき、世にも醜い容貌の持主でございます。これをどうか、はっきりと、お覚えなすっていて下さいませ。そうでないと、若し、あなたが、この無躾な願いを容いれて、私にお逢あい下さいました場合、たださえ醜い私の顔が、長い月日の不健康な生活の為ために、二ふた目と見られぬ、ひどい姿になっているのを、何の予備知識もなしに、あなたに見られるのは、私としては、堪たえ難がたいことでございます。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>私という男は、何と因果な生れつきなのでありましょう。そんな醜い容貌を持ちながら、胸の中では、人知れず、世にも烈はげしい情熱を、燃もやしていたのでございます。私は、お化ばけのような顔をした、その上極ごく貧乏な、一職人に過ぎない私の現実を忘れて、身の程知らぬ、甘美な、贅沢ぜいたくな、種々様々の「夢」にあこがれていたのでございます。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>私が若し、もっと豊な家に生れていましたなら、金銭の力によって、色々の遊戯に耽ふけり、醜貌しゅうぼうのやるせなさを、まぎらすことが出来たでもありましょう。それとも又、私に、もっと芸術的な天分が、与えられていましたなら、例えば美しい詩歌によって、此世このよの味気あじきなさを、忘れることが出来たでもありましょう。併しかし、不幸な私は、何いずれの恵みにも浴することが出来ず、哀れな、一家具職人の子として、親譲りの仕事によって、其日そのひ其日の暮しを、立てて行く外ほかはないのでございました。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>私の専門は、様々の椅子いすを作ることでありました。私の作った椅子は、どんな難しい註文主にも、きっと気に入るというので、商会でも、私には特別に目をかけて、仕事も、上物じょうものばかりを、廻して呉くれて居りました。そんな上物になりますと、凭もたれや肘掛ひじかけの彫りものに、色々むずかしい註文があったり、クッションの工合ぐあい、各部の寸法などに、微妙な好みがあったりして、それを作る者には、一寸ちょっと素人の想像出来ない様な苦心が要るのでございますが、でも、苦心をすればした丈け、出来上った時の愉快というものはありません。生意気を申す様ですけれど、その心持ちは、芸術家が立派な作品を完成した時の喜びにも、比ぶべきものではないかと存じます。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>閉じる<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<h3>CSS</h3>
<div class="p-post__code" data-language="css"><pre class=" language-css"><code class=" language-css"><span class="token selector">* </span><span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.timeline</span> </span><span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">3</span>em auto<span class="token punctuation">;</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> <span class="token number">500</span>px<span class="token punctuation">;</span>
  <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#fff</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">3</span>px <span class="token number">20</span>px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">184</span>, <span class="token number">184</span>, <span class="token number">141</span>, <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.timeline</span> &gt; li </span><span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">1.4</span>em <span class="token number">1.5</span>em <span class="token number">1.4</span>em <span class="token number">5</span>em<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.timeline</span> &gt; li + li </span><span class="token punctuation">{</span>
  <span class="token property">border-top</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid <span class="token hexcode">#eaeae0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.timeline</span> &gt; li<span class="token pseudo-element">::after</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.timeline</span> &gt; li<span class="token pseudo-class">:hover</span> </span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#fdfdf6</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.avatar</span> </span><span class="token punctuation">{</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> -<span class="token number">3.5</span>em<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">54</span>px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">54</span>px<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#eee</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.content</span> </span><span class="token punctuation">{</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">.9</span>em<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.content</span> &gt; span </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">.2</span>em<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.content</span> &gt; p </span><span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> justify<span class="token punctuation">;</span>
  <span class="token property">text-justify</span><span class="token punctuation">:</span> inter-ideograph<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">1.4</span><span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">.95</span>em<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.overlay</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> -<span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> -<span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">.45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>
  <span class="token property">-webkit-backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.container</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">10</span>px <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.inner</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">2.7</span>em <span class="token number">2</span>em<span class="token punctuation">;</span>
  <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.modal</span> </span><span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">1.9</span>em <span class="token number">2</span>em<span class="token punctuation">;</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> <span class="token number">550</span>px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> justify<span class="token punctuation">;</span>
  <span class="token property">text-justify</span><span class="token punctuation">:</span> inter-ideograph<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">7</span>px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#fff</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">5</span>px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.modal</span><span class="token pseudo-element">::after</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.modal</span> &gt; p </span><span class="token punctuation">{</span>
  <span class="token property">text-indent</span><span class="token punctuation">:</span> <span class="token number">1</span>em<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">1.7</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.button</span> </span><span class="token punctuation">{</span>
  <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">.8</span>em<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">.5</span>em <span class="token number">1.4</span>em<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#fff</span><span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">.95</span>em<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">4</span>px<span class="token punctuation">;</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#e57373</span><span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token property">-webkit-appearance</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">-moz-appearance</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">appearance</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.button</span><span class="token pseudo-class">:hover</span> </span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#dd7979</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h3>JavaScript</h3>
<div class="p-post__code" data-language="javascript"><pre class=" language-javascript"><code class=" language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token keyword">var</span> $window <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">,</span>
    $html <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    $body <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    $overlay <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.overlay'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    scrollbar_width <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">-</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollWidth<span class="token punctuation">,</span>
    touch_start_y<span class="token punctuation">;</span>

$window<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  touch_start_y <span class="token operator">=</span> event<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>screenY<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.timeline &gt; li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  $window<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'touchmove.noscroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> overlay <span class="token operator">=</span> $overlay<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        current_y <span class="token operator">=</span> event<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>screenY<span class="token punctuation">,</span>
        height <span class="token operator">=</span> $overlay<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        is_top <span class="token operator">=</span> touch_start_y <span class="token operator">&lt;=</span> current_y <span class="token operator">&amp;&amp;</span> overlay<span class="token punctuation">.</span>scrollTop <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">,</span>
        is_bottom <span class="token operator">=</span> touch_start_y <span class="token operator">&gt;=</span> current_y <span class="token operator">&amp;&amp;</span> overlay<span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> overlay<span class="token punctuation">.</span>scrollTop <span class="token operator">===</span> height<span class="token punctuation">;</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>is_top <span class="token operator">||</span> is_bottom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'overflow'</span><span class="token punctuation">,</span> <span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollbar_width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $html<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'padding-right'</span><span class="token punctuation">,</span> scrollbar_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  $overlay<span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">closeModal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  $body<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  $window<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'touchmove.noscroll'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  $overlay<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    opacity<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $overlay<span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    $html<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

$overlay<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">$</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.modal'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">closeModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">closeModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="euegz5cfd5a96e99d5"><div class="book">
  <p class="book-p">CSS本執筆しました！！！</p>
  <twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1079591112627474432"></twitter-widget>
<script async="" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/widgets.js" charset="utf-8"></script>
<style>
.book {
  margin: 2em -4rem;
  padding: 1.4em 4rem;
  border-top: 1px dashed #1699cb;
  border-bottom: 1px dashed #1699cb;
  background-color: #f9fdfe;
}
.book-p {
  margin: 0 0 .45em;
  color: #1699cb;
  font-size: 1.1em;
  font-weight: bold;
}
@media (max-width: 739px) and (min-width: 320px) {
  .book {
    margin-left: calc(-2.4rem - ((1vw - 3.2px) * 3.8095238));
    margin-right: calc(-2.4rem - ((1vw - 3.2px) * 3.8095238));
    padding-left: calc(2.4rem + ((1vw - 3.2px) * 3.8095238));
    padding-right: calc(2.4rem + ((1vw - 3.2px) * 3.8095238));
  }
}
</style>
</div></div><style type="text/css">
@media screen and (min-width: 1201px) {
.euegz5cfd5a96e99d5 {
display: block;
}
}
@media screen and (min-width: 993px) and (max-width: 1200px) {
.euegz5cfd5a96e99d5 {
display: block;
}
}
@media screen and (min-width: 769px) and (max-width: 992px) {
.euegz5cfd5a96e99d5 {
display: block;
}
}
@media screen and (min-width: 768px) and (max-width: 768px) {
.euegz5cfd5a96e99d5 {
display: block;
}
}
@media screen and (max-width: 767px) {
.euegz5cfd5a96e99d5 {
display: block;
}
}
</style>
            </section>
            
<aside class="c-share">
  <div class="c-share__inner">
    <div class="c-share__item">
      <a class="c-share__link c-share--twitter" href="https://twitter.com/share?text=JS%E3%81%A7iOS%E3%81%AB%E3%82%82%E9%85%8D%E6%85%AE%E3%81%97%E3%81%9F%E8%83%8C%E6%99%AF%E5%9B%BA%E5%AE%9A%E3%81%AA%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E5%AF%BE%E5%BF%9C%E3%81%AE%E3%83%A2%E3%83%BC%E3%83%80%E3%83%AB%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%20%7C%20SPYWEB&amp;url=https%3A%2F%2Fspyweb.media%2F2017%2F09%2F21%2Fmodal-window-fixed-background-also-support-ios%2F" target="_blank"></a>
    </div>
    <div class="c-share__item">
      <a class="c-share__link c-share--facebook" href="https://www.facebook.com/sharer.php?src=bm&amp;u=https%3A%2F%2Fspyweb.media%2F2017%2F09%2F21%2Fmodal-window-fixed-background-also-support-ios%2F&amp;t=JS%E3%81%A7iOS%E3%81%AB%E3%82%82%E9%85%8D%E6%85%AE%E3%81%97%E3%81%9F%E8%83%8C%E6%99%AF%E5%9B%BA%E5%AE%9A%E3%81%AA%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E5%AF%BE%E5%BF%9C%E3%81%AE%E3%83%A2%E3%83%BC%E3%83%80%E3%83%AB%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%20%7C%20SPYWEB" target="_blank"></a>
    </div>
    <div class="c-share__item">
      <a class="c-share__link c-share--hatebu" href="https://b.hatena.ne.jp/entry/https%3A%2F%2Fspyweb.media%2F2017%2F09%2F21%2Fmodal-window-fixed-background-also-support-ios%2F" target="_blank"></a>
    </div>
    <div class="c-share__item">
      <a class="c-share__link c-share--pocket" href="https://getpocket.com/edit?url=https%3A%2F%2Fspyweb.media%2F2017%2F09%2F21%2Fmodal-window-fixed-background-also-support-ios%2F" target="_blank"></a>
    </div>
    <div class="c-share__item">
      <a class="c-share__link c-share--feedly" href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Fspyweb.media%2Ffeed%2F" target="_blank"></a>
    </div>
  </div>
</aside>          </section>
        </div>
      </div>
      <aside class="p-author">
  <h3 class="c-content__title" data-type="author">著者</h3>
  <div class="p-author__box">
    <img class="p-author__image" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/author.svg" alt="">
    <p class="p-author__content">
      主にHTML/CSS/JS/PHPを扱う、Web制作が大好きな22歳。ブログには備忘録としてつまずいたりハマったりしたことを残しています。今後は各種プラグイン開発もまったり行なっていきます。日々勉強！
      <span class="p-author__button">
        <a class="p-author__link" href="https://twitter.com/takamosoo" target="_blank">Twitter</a>
      </span>
    </p>
  </div>
</aside>    </div>
  </div>
  <footer class="l-footer">
  <section class="p-copyright">
    SPYWEB 2017
  </section>
</footer></main>



</div>

<script>
var ajaxUrl = 'https://spyweb.media/wp-admin/admin-ajax.php', nonce = 'b6c87da852';
</script>
<script src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/script.js"></script>


<iframe scrolling="no" frameborder="0" allowtransparency="true" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/widget_iframe.d753e00c3e838c1b2558149bd3f6ecb8.html" title="Twitter settings iframe" style="display: none;"></iframe><iframe id="google_osd_static_frame_6836540180693" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/saved_resource(2).html"></iframe><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/saved_resource(3).html"></iframe></body><iframe id="google_shimpl" style="display: none;" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/saved_resource(4).html"></iframe><iframe id="google_esf" name="google_esf" src="./JSでiOSにも配慮した背景固定なスクロール対応のモーダルウィンドウ _ SPYWEB_files/zrt_lookup.html" data-ad-client="ca-pub-9575888437670647" style="display: none;"></iframe></html>